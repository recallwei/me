---
import { ContentTitle, PostToggleLang } from '@/components'
import { BaseLayout } from '@/layouts'
import type { Lang } from '@/types'
import { formatDate, getDateByPostId } from '@/utils'
import { getPosts } from '@/utils/server'

export interface Props {
  title: string
  lang: Lang
}

const { title, lang } = Astro.props

const posts = await getPosts(lang)

const getPostDate = (id: string) => formatDate(getDateByPostId(id), 'MMM D')
---

<BaseLayout title={title}>
  <ContentTitle>
    <span>{title}</span>
    <PostToggleLang lang={lang} />
  </ContentTitle>

  <ul class="space-y-2">
    {
      posts.map((item) => (
        <li class="flex items-center space-x-1">
          <span class="text-muted w-16 text-base">{getPostDate(item.id)}</span>
          <a
            href={`/posts/${item.slug}`}
            class="underline-offset-4 hover:underline"
          >
            {item.data.title}
          </a>
        </li>
      ))
    }
  </ul>
</BaseLayout>
